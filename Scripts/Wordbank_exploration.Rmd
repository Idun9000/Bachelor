---
title: "wordbank"
author: "Tilde Sloth"
date: "2023-09-18"
output: html_document
---

## Loading packages
```{r}
pacman::p_load(ggplot2, tidyverse, rethinking, stringr)
```


## Loading data
```{r}
worddata_usa <- read_csv("../Data/wordbank_instrument_data_us.csv")
childdata_usa <- read_csv("../Data/wordbank_administration_data_us.csv")

#creating a list of all the children that have longitudinal data
specialkids <- worddata_usa %>%
    group_by(child_id)%>%
    filter(n_distinct(age) > 1)%>%
    distinct(child_id)

#making a subset of all the children that have longitudinal data
longitudinal_usa <- worddata_usa %>%
  group_by(child_id) %>%
  filter(n_distinct(age) > 1) %>%
  ungroup()

```

## Merging data
```{r}
data_usa <- merge(longitudinal_usa, childdata_usa, by = "child_id", "age")
```

## Cleaning data
```{r}
#only looking at words
data_usa <- data_usa %>%
  filter(item_kind == "word")

#removing words that are sounds
data_usa <- data_usa %>%
  filter(category != "sounds")

#removing unimportant columns
data_usa <- subset(data_usa, select = -c(downloaded.x, downloaded.y, is_norming, ethnicity, race, birth_weight, born_early_or_late, gestational_age, zygosity, language_exposures, health_conditions, monolingual, typically_developing, value))


#changing item_id column
data_usa$item_id <- substr(data_usa$item_id, start = 6, stop = nchar(data_usa$item_id))

data_usa <- data_usa %>% 
    mutate(item_id = as.numeric(item_id))

#looking at the unique "more than one words"
more_than_one_word <- data_usa[str_detect(data_usa$item_definition, "\\s+"), ]

more_than_one_word_unique <- more_than_one_word %>% distinct(item_definition)

```


## Making a smaller subset of data to work with
```{r}
subsetdata_usa <- data_usa %>% 
    filter(child_id < 1600) # This is only 75 kids btw

# Save subset as csv for import in other files
write.csv(subsetdata_usa, file = "../Data/75kidsubset.csv")

```

## Investigating data
```{r}
rethinking::precis(subsetdata_usa)


```

## Semantic distance
```{r}

```

